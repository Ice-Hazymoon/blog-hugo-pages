<!doctype html><html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=keywords content="Ice-Hazymoon,å†°å‡Œèƒ§æœˆ,Hazymoon,MikuTools,">
<meta name=description content="Google Analytics å›ºç„¶å¥½ç”¨ï¼Œä½†ç»å¸¸ä¼šå‡ºç°è¢« AdÂ­block æ­¤ç±»çš„æ’ä»¶ä½œä¸ºå¹¿å‘Šç»™æ‹¦æˆªï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°æ— æ³•åŠ è½½çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<meta itemprop=description content="Google Analytics å›ºç„¶å¥½ç”¨ï¼Œä½†ç»å¸¸ä¼šå‡ºç°è¢« AdÂ­block æ­¤ç±»çš„æ’ä»¶ä½œä¸ºå¹¿å‘Šç»™æ‹¦æˆªï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°æ— æ³•åŠ è½½çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta itemprop=name content="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<link href=https://imiku.me/index.xml title="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦" type=application/rss+xml rel=alternate>
<title>ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦</title>
<link rel=stylesheet href="https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/main.css?v=1631087921">
<meta property="og:site_name" content="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<meta property="og:type" content="article">
<meta property="og:title" content="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<meta property="og:description" content="Google Analytics å›ºç„¶å¥½ç”¨ï¼Œä½†ç»å¸¸ä¼šå‡ºç°è¢« AdÂ­block æ­¤ç±»çš„æ’ä»¶ä½œä¸ºå¹¿å‘Šç»™æ‹¦æˆªï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°æ— æ³•åŠ è½½çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<meta property="og:url" content="https://imiku.me/2017/07/13/916.html/">
<meta property="og:image" content="https://imiku.me/2017/07/13/916.html/1630060151373669.png">
<meta property="article:publisher" content="https://imiku.me/2017/07/13/916.html/">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:title content="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<meta name=twitter:description content="Google Analytics å›ºç„¶å¥½ç”¨ï¼Œä½†ç»å¸¸ä¼šå‡ºç°è¢« AdÂ­block æ­¤ç±»çš„æ’ä»¶ä½œä¸ºå¹¿å‘Šç»™æ‹¦æˆªï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°æ— æ³•åŠ è½½çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<meta name=twitter:url content="https://imiku.me/2017/07/13/916.html/">
<meta name=twitter:image content="https://imiku.me/2017/07/13/916.html/1630060151373669.png">
<meta name=twitter:site content="@Ice-Hazymoon">
<meta property="og:image:width" content="1920">
<meta property="og:image:height" content="1280">
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/imiku.me\/2017\/07\/13\/916.html\/"},"image":{"@type":"ImageObject","url":"https:\/\/imiku.me\/cover.png","width":1e3,"height":519},"genre":"post","keywords":"Google Analytics, ç½‘ç«™ä¼˜åŒ–","wordcount":1757,"url":"https:\/\/imiku.me\/2017\/07\/13\/916.html\/","datePublished":"2017-07-13T16:28:58\u002b00:00","dateModified":"2017-07-13T16:28:58\u002b00:00","author":{"@type":"Person","name":"Ice-Hazymoon"},"description":""}</script>
</head><body>
<div class="mx-auto relative shadow-lg">
<div class="bg-white main md:max-w-4xl mx-auto relative xl:max-w-4xl flex flex-col justify-between">
<header class="relative z-40">
<nav class="bg bg-white border-b flex items-center md:px-10 navbar px-5 py-6 top-0 z-10">
<div class="flex items-center justify-around route-items w-full">
<div class="flex flex-col items-center">
<a data-active-link=/ href=/ class="cursor-pointer relative text-gray-700 ts-3-ease">
<i class="eva eva-home flex justify-center items-center h-8 text-3xl line-height-1 text-gray-500 ts-3-ease w-8"></i>
</a>
<span class="block md:hidden mt-2 text-xs">é¦–é¡µ</span>
</div>
<div class="flex flex-col items-center">
<a data-active-link=/about href=/about class="cursor-pointer relative text-gray-700 ts-3-ease">
<i class="eva eva-heart flex justify-center items-center h-8 text-3xl line-height-1 text-gray-500 ts-3-ease w-8"></i>
</a>
<span class="block md:hidden mt-2 text-xs">å…³äºæˆ‘</span>
</div>
<div class="flex flex-col items-center">
<a data-active-link=/links href=/links class="cursor-pointer relative text-gray-700 ts-3-ease">
<i class="eva eva-people flex justify-center items-center h-8 text-3xl line-height-1 text-gray-500 ts-3-ease w-8"></i>
</a>
<span class="block md:hidden mt-2 text-xs">æœ‹å‹ä»¬</span>
</div>
<div class="flex flex-col items-center">
<a data-active-link=/twitter href=/twitter class="cursor-pointer relative text-gray-700 ts-3-ease">
<i class="eva eva-twitter flex justify-center items-center h-8 text-3xl line-height-1 text-gray-500 ts-3-ease w-8"></i>
</a>
<span class="block md:hidden mt-2 text-xs">æ¨ç‰¹åŠ¨æ€</span>
</div>
<div class="flex flex-col items-center">
<a data-active-link=/timeline href=/timeline class="cursor-pointer relative text-gray-700 ts-3-ease">
<i class="eva eva-bar-chart flex justify-center items-center h-8 text-3xl line-height-1 text-gray-500 ts-3-ease w-8"></i>
</a>
<span class="block md:hidden mt-2 text-xs">æ—¶é—´è½´</span>
</div>
<div class="flex flex-col items-center">
<a data-active-link=/github href=/github class="cursor-pointer relative text-gray-700 ts-3-ease">
<i class="eva eva-github flex justify-center items-center h-8 text-3xl line-height-1 text-gray-500 ts-3-ease w-8"></i>
</a>
<span class="block md:hidden mt-2 text-xs">GitHub</span>
</div>
<div class="flex flex-col items-center">
<a data-active-link=/search href=/search class="cursor-pointer relative text-gray-700 ts-3-ease">
<i class="eva eva-search flex justify-center items-center h-8 text-3xl line-height-1 text-gray-500 ts-3-ease w-8"></i>
</a>
<span class="block md:hidden mt-2 text-xs">æœç´¢</span>
</div>
</div>
</nav>
</header><main class="relative flex-grow" id=swup>
<div class="h-full nuxt-main relative">
<div class="h-full relative">
<div class="bg-white h-full overflow-auto page-view-article">
<div class=relative>
<div class="article-cover h-0 relative w-full">
<img src=https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373669.png srcset="https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373669_hu73f5cea4cee7a0e581ca5b6dd9399e90_31630_800x0_resize_catmullrom_3.png 800w, https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373669_hu73f5cea4cee7a0e581ca5b6dd9399e90_31630_1600x0_resize_catmullrom_3.png 1600w" alt="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦" class="absolute h-full left-0 object-center object-cover top-0 w-full">
</div>
<h1 class="absolute article-title bottom-0 left-0 md:text-4xl pb-6 pt-20 px-6 text-3xl text-white w-full">
ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦
</h1>
</div>
<div class="article-info p-6 pb-2">
<div class="bg-red-500 inline-flex items-center mb-2 mr-2 px-2 py-1 sm:rounded-full text-white text-xs">
<i class="eva eva-clock-outline mr-1"></i>
<span>
<time datetime=2017-07-13T16:28:58Z>2017-07-13 16:28:58</time>
</span>
</div>
<span class="bg-green-500 inline-flex items-center mb-2 mr-2 px-2 py-1 sm:rounded-full text-white text-xs">
<i class="eva eva-person-outline mr-1"></i>
<span>Ice-Hazymoon</span>
</span>
<div class="bg-indigo-500 inline-flex items-center mb-2 mr-2 px-2 py-1 sm:rounded-full text-white text-xs">
<i class="eva eva-flag-outline mr-1"></i>
<span>é˜…è¯»çº¦ 4 åˆ†é’Ÿ</span>
</div>
<div class="bg-blue-500 inline-flex items-center mb-2 mr-2 px-2 py-1 sm:rounded-full text-white text-xs">
<i class="eva eva-bar-chart-outline mr-1"></i>
<span>1757 å­—</span>
</div>
</div>
<div class="border-b border-gray-300 pb-6 px-6">
<div class="flex items-center mb-2">
<i class="eva eva-pricetags-outline mr-1"></i>
<span class=mr-2>æ ‡ç­¾</span>
<a href=/tags/google-analytics title="Google Analytics" class="flex hover:text-theme items-center mr-1 px-1 py-1 text-xs">
<i class="eva eva-hash-outline"></i>
<span>Google Analytics</span>
</a>
<a href=/tags/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96 title=ç½‘ç«™ä¼˜åŒ– class="flex hover:text-theme items-center mr-1 px-1 py-1 text-xs">
<i class="eva eva-hash-outline"></i>
<span>ç½‘ç«™ä¼˜åŒ–</span>
</a>
</div>
<div class="flex items-center mb-2">
<i class="eva eva-folder-outline mr-1"></i>
<span class=mr-2>åˆ†ç±»</span>
<a href=/categories/%E4%BB%A3%E7%A0%81%E5%90%91 title=ä»£ç å‘ class="flex hover:text-theme items-center mr-1 px-1 py-1 text-xs">
<i class="eva eva-book-outline"></i>
<span>ä»£ç å‘</span>
</a>
</div>
</div>
<aside class=toc>
<header>
<h1 class="text-2xl font-bold mb-3">æ–‡ç« ç›®å½•</h1>
</header>
<nav id=TableOfContents></nav>
</aside>
<section class="article-content px-10 py-5 typo"><p>GoogleÂ Analytics å›ºç„¶å¥½ç”¨ï¼Œä½†ç»å¸¸ä¼šå‡ºç°è¢« AdÂ­block æ­¤ç±»çš„æ’ä»¶ä½œä¸ºå¹¿å‘Šç»™æ‹¦æˆªï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°æ— æ³•åŠ è½½çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š</p>
<p>
<figure class=gallery-image style=flex-grow:745;flex-basis:1788px>
<img data-src=https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373743.png width=380 height=51 data-srcset="https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373743_huaae4bc16bedb4ef5c611282d27db0085_8167_640x0_resize_catmullrom_3.png 640w, https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373743_huaae4bc16bedb4ef5c611282d27db0085_8167_1080x0_resize_catmullrom_3.png 1080w" data-zoomable data-lazyload alt="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<figcaption>ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦</figcaption>
</figure><br>
æˆ–è€…ï¼š<br>
<figure class=gallery-image style=flex-grow:840;flex-basis:2018px>
<img data-src=https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373239.png width=740 height=88 data-srcset="https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373239_hu12c47e41e9c95a07806488333a902340_14704_640x0_resize_catmullrom_3.png 640w, https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373239_hu12c47e41e9c95a07806488333a902340_14704_1080x0_resize_catmullrom_3.png 1080w" data-zoomable data-lazyload alt="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<figcaption>ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦</figcaption>
</figure></p>
<p>äºæ˜¯æˆ‘ç»ˆäºå—ä¸é¸Ÿäº†ï¼Œç™¾åº¦äº†ä¸‹ç›¸å…³çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¸è¿‡éƒ½æ˜¯åŸºäºåç«¯çš„ã€‚åƒæˆ‘è¿™ç§åªç”¨å¾—èµ·è™šæ‹Ÿä¸»æœºçš„äººæ¥è¯´ï¼Œå’Œæˆ‘æ ¹æœ¬æ— ç¼˜Â ğŸ˜¥ ã€‚ä¸ä¹…ååœ¨ Neo çš„åšå®¢çœ‹åˆ°äº†Â <a href=https://blog.nfz.moe/archives/google-analytics-optimize.html>Google Analytics å¼‚æ­¥ä¼˜åŒ–æ–¹æ¡ˆ</a>Â è¿™æ ·ä¸€ç¯‡æ–‡ç« ï¼Œæœ‰å†™å…³äºphpä¸»æœºçš„ä¼˜åŒ–æ•™ç¨‹ï¼Œäºæ˜¯å°±é¡ºä¾¿æ‹¿æ¥ç”¨äº†ï¼Œæ©ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<hr>
<h1 id=google-analytics-å¼‚æ­¥æ–¹æ¡ˆçš„å¿…è¦æ€§>Google Analytics å¼‚æ­¥æ–¹æ¡ˆçš„å¿…è¦æ€§</h1>
<p>è™½ç„¶ç°åœ¨ Google Analytics çš„Â <code>www.google-analytics.com</code>Â å’ŒÂ <code>ssl.google-analytics.com</code>Â å·²ç»é‡æ–°è§£æå›è°·æ­Œåœ¨å›½å†…é‚£ 200 å¤šå°æœåŠ¡å™¨äº†ï¼Œæ‰€ä»¥ Google Analytics å·²ç»ä¸ç”¨å†æ‹…å¿ƒè¢«å¢™è€Œå¯¼è‡´ç½‘ç«™åŠ è½½æ…¢å’Œæ— æ³•é‡‡é›†åˆ°æ•°æ®çš„é—®é¢˜äº†ã€‚</p>
<p>ç„¶è€Œï¼Œæµè§ˆå™¨ç«¯ç»å¸¸æœ‰æ„æ— æ„çš„ï¼ŒåŒ…æ‹¬å¸¸è§çš„ AdÂ­block æ‰©å±•ç­‰è‡ªå¸¦çš„å±è”½åˆ—è¡¨ï¼Œåˆ©ç”¨ userÂ­script ç­‰æ–¹å¼ï¼Œå±è”½ Google AnÂ­aÂ­lytÂ­icsã€‚è¿™å¯¼è‡´äº†æ•°æ®ç»Ÿè®¡ä¸å‡†çš„é—®é¢˜ã€‚</p>
<p>åœ¨ JerryQu çš„Â <a href=https://imququ.com/post/summary-of-my-blog-optimization.html>ã€Šæœ¬åšå®¢é›¶æ•£ä¼˜åŒ–ç‚¹æ±‡æ€»ã€‹</a>Â ä¸€æ–‡ä¸­æåˆ°ä»–æ˜¯å¦‚ä½•å¤„ç† Google Analytics çš„ï¼š</p>
<blockquote>
<p>æŠŠç»Ÿè®¡é€»è¾‘æŒªåˆ°äº†æœåŠ¡ç«¯ï¼›è‡ªå·±ç”Ÿæˆç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œè·å–è®¿é—®é¡µé¢çš„æ ‡é¢˜ã€URLã€Refererï¼Œè·å–ç”¨æˆ· IP å’Œæµè§ˆå™¨ UAï¼Œéšç€æ¯æ¬¡è®¿é—®å‘ç»™ Google çš„ç»Ÿè®¡åœ°å€ã€‚æœåŠ¡ç«¯å‘ Google å‘èµ·çš„è¯·æ±‚æ˜¯å¼‚æ­¥çš„ï¼Œç”¨æˆ·ç«¯è®¿é—®é€Ÿåº¦ä¸æ¯«ä¸å—å½±å“ã€‚</p>
</blockquote>
<p>Google Analytics çš„Â <a href=https://developers.google.com/analytics/devguides/collection/protocol/v1/reference>å®˜æ–¹æ–‡æ¡£</a>Â ç»™å‡ºäº†ç›¸å…³ä»‹ç»ï¼ŒGoogle ä¹Ÿæä¾›äº† <a href=https://developers.google.com/analytics/devguides/collection/protocol/v1/>Measurement Protocol</a>ã€‚</p>
<h1 id=google-analytics-å¼‚æ­¥æ–¹æ¡ˆä»‹ç»>Google Analytics å¼‚æ­¥æ–¹æ¡ˆä»‹ç»</h1>
<p>ç›®å‰å¸¸è§çš„æ˜¯è¿™ä¸¤ç§æ–¹æ³•ï¼šå®Œæ•´çš„åç«¯æ–¹æ¡ˆå’Œå‰ç«¯å’Œåç«¯æ­é…çš„æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>å‰è€…é€šè¿‡é…ç½® Nginxï¼Œä½¿ç”¨ uid æ¨¡å—å’Œ proxy_pass å‘åç«¯è½¬å‘è¯·æ±‚ï¼›åè€…çš„æ–¹æ¡ˆåˆ™æ˜¯é€šè¿‡ JS å‘é€è¯·æ±‚ç»™ä¸­è½¬æœåŠ¡ï¼Œå†ç”±ä¸­è½¬æœåŠ¡å™¨å¼‚æ­¥å‘é€ç»™ Googleã€‚å¯¹äºå‰è€…çš„è§£å†³æ–¹æ¡ˆçš„å®ç°å¯ä»¥é˜…è¯»ä¸‹è¿°æ–‡ç« ï¼š</p>
</blockquote>
<ul>
<li><a href=https://darknode.in/network/nginx-google-analytics/>ã€ŠNgÂ­inx å†…é…ç½® Google AnÂ­aÂ­lytÂ­ics æŒ‡å—ã€‹</a></li>
<li><a href=https://eason-yang.com/2016/11/04/google-analytics-via-nginx/>ã€Šä½¿ç”¨ Nginx å°†è¯·æ±‚è½¬å‘è‡³ Google Analytics å®ç°åç«¯ç»Ÿè®¡ã€‹</a></li>
</ul>
<p>è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆï¼Œå°±æ˜¯åœ¨å‰ç«¯é€šè¿‡ JS å‘èµ·ä¸€ä¸ªè¯·æ±‚ã€ç”Ÿæˆç”¨æˆ·ç«¯çš„ä¿¡æ¯å¸¦åˆ°è¯·æ±‚çš„ URI ä¸Šï¼Œç„¶ååç«¯çš„æœ‰å…³ç¨‹åºç›‘å¬è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶å¼‚æ­¥å‘é€ç»™ Googleã€‚</p>
<blockquote>
<p>å¯¹äºè¿™ç§è§£å†³æ–¹æ¡ˆï¼Œæœ‰äººå†™äº†ä¸€ä¸ª Node.jsï¼ˆåŸºäº ThinkJSï¼‰ çš„ç¨‹åºå®ç°ï¼š<a href=https://blog.alphatr.com/google-analytics-on-server.html>ã€ŠæœåŠ¡ç«¯ä½¿ç”¨ Google Analyticsã€‹</a></p>
</blockquote>
<h1 id=php-çš„è½®å­-php--çš„è½®å­>PHP çš„è½®å­ {#PHP- çš„è½®å­}</h1>
<p>æˆ‘æƒ³ï¼Œæ²¡æœ‰ Node.js æ”¯æŒçš„è™šæ‹Ÿä¸»æœºï¼Œåˆä¸æ˜¯æ‰€æœ‰äººéƒ½æœ‰ç‹¬ç«‹çš„ VPS çš„ï¼Œä¹Ÿä¸æ˜¯æ‰€æœ‰äººéƒ½ä½¿ç”¨ Node.js çš„ã€‚æ‰€ä»¥æˆ‘æ ¹æ®è¿™ç§æ€è·¯ï¼Œæ‰¾åˆ°äº†ä¸ª PHP ç‰ˆçš„ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#ff79c6>&lt;?</span>php
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#6272a4>// ********************
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#6272a4>// * Author: stneng
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#6272a4>// * Date: 2016.12.11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#6272a4>// * Introduction: https://u.nu/ytq
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#6272a4>// *********************
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#6272a4></span>    header(<span style=color:#f1fa8c>&#34;status: 204&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    header(<span style=color:#f1fa8c>&#34;Cache-Control: no-cache, max-age=0&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    header(<span style=color:#f1fa8c>&#34;Pragma: no-cache&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#8be9fd;font-style:italic>$tid</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;&#39;</span>;  <span style=color:#6272a4>// åœ¨è¿™é‡Œå†™ Google Analytics ç»™çš„ tidï¼Œå½¢å¦‚ï¼šUA-XXXX-Y
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#6272a4></span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>create_uuid</span>(){<span style=color:#8be9fd;font-style:italic>$str</span> <span style=color:#ff79c6>=</span> md5(uniqid(mt_rand(), <span style=color:#ff79c6>true</span>));
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        <span style=color:#8be9fd;font-style:italic>$uuid</span> <span style=color:#ff79c6>=</span> substr(<span style=color:#8be9fd;font-style:italic>$str</span>,<span style=color:#bd93f9>0</span>,<span style=color:#bd93f9>8</span>) <span style=color:#ff79c6>.</span> <span style=color:#f1fa8c>&#39;-&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>        <span style=color:#8be9fd;font-style:italic>$uuid</span> <span style=color:#ff79c6>.=</span> substr(<span style=color:#8be9fd;font-style:italic>$str</span>,<span style=color:#bd93f9>8</span>,<span style=color:#bd93f9>4</span>) <span style=color:#ff79c6>.</span> <span style=color:#f1fa8c>&#39;-&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>        <span style=color:#8be9fd;font-style:italic>$uuid</span> <span style=color:#ff79c6>.=</span> substr(<span style=color:#8be9fd;font-style:italic>$str</span>,<span style=color:#bd93f9>12</span>,<span style=color:#bd93f9>4</span>) <span style=color:#ff79c6>.</span> <span style=color:#f1fa8c>&#39;-&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>        <span style=color:#8be9fd;font-style:italic>$uuid</span> <span style=color:#ff79c6>.=</span> substr(<span style=color:#8be9fd;font-style:italic>$str</span>,<span style=color:#bd93f9>16</span>,<span style=color:#bd93f9>4</span>) <span style=color:#ff79c6>.</span> <span style=color:#f1fa8c>&#39;-&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>        <span style=color:#8be9fd;font-style:italic>$uuid</span> <span style=color:#ff79c6>.=</span> substr(<span style=color:#8be9fd;font-style:italic>$str</span>,<span style=color:#bd93f9>20</span>,<span style=color:#bd93f9>12</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$uuid</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span>isset(<span style=color:#8be9fd;font-style:italic>$_COOKIE</span>[<span style=color:#f1fa8c>&#34;uuid&#34;</span>])) {<span style=color:#8be9fd;font-style:italic>$uuid</span><span style=color:#ff79c6>=</span>create_uuid();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>        setcookie(<span style=color:#f1fa8c>&#34;uuid&#34;</span>, <span style=color:#8be9fd;font-style:italic>$uuid</span> , time()<span style=color:#ff79c6>+</span><span style=color:#bd93f9>368400000</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>    }<span style=color:#ff79c6>else</span>{<span style=color:#8be9fd;font-style:italic>$uuid</span><span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>$_COOKIE</span>[<span style=color:#f1fa8c>&#34;uuid&#34;</span>];
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>    <span style=color:#ff79c6>if</span> (function_exists(<span style=color:#f1fa8c>&#34;fastcgi_finish_request&#34;</span>)) {fastcgi_finish_request(); <span style=color:#6272a4>// å¯¹äº fastcgi ä¼šæå‰è¿”å›è¯·æ±‚ç»“æœï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span style=color:#6272a4></span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;v=1&amp;t=pageview&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;tid=&#39;</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd;font-style:italic>$tid</span><span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;cid=&#39;</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd;font-style:italic>$uuid</span><span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;dl=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_SERVER</span>[<span style=color:#f1fa8c>&#39;HTTP_REFERER&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;uip=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_SERVER</span>[<span style=color:#f1fa8c>&#39;REMOTE_ADDR&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;ua=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_SERVER</span>[<span style=color:#f1fa8c>&#39;HTTP_USER_AGENT&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;dt=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_GET</span>[<span style=color:#f1fa8c>&#39;dt&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;dr=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_GET</span>[<span style=color:#f1fa8c>&#39;dr&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;ul=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_GET</span>[<span style=color:#f1fa8c>&#39;ul&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;sd=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_GET</span>[<span style=color:#f1fa8c>&#39;sd&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;sr=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_GET</span>[<span style=color:#f1fa8c>&#39;sr&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;vp=&#39;</span><span style=color:#ff79c6>.</span>rawurlencode(rawurldecode(<span style=color:#8be9fd;font-style:italic>$_GET</span>[<span style=color:#f1fa8c>&#39;vp&#39;</span>]))<span style=color:#ff79c6>.</span><span style=color:#f1fa8c>&#39;&amp;&#39;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>.=</span><span style=color:#f1fa8c>&#39;z=&#39;</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd;font-style:italic>$_GET</span>[<span style=color:#f1fa8c>&#39;z&#39;</span>];
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>    <span style=color:#8be9fd;font-style:italic>$url</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;https://www.google-analytics.com/collect?&#39;</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd;font-style:italic>$url</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span>    <span style=color:#8be9fd;font-style:italic>$ch</span><span style=color:#ff79c6>=</span>curl_init();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span>      curl_setopt(<span style=color:#8be9fd;font-style:italic>$ch</span>, CURLOPT_URL, <span style=color:#8be9fd;font-style:italic>$url</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span>      curl_setopt(<span style=color:#8be9fd;font-style:italic>$ch</span>, CURLOPT_RETURNTRANSFER, <span style=color:#ff79c6>true</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span>      curl_exec(<span style=color:#8be9fd;font-style:italic>$ch</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span>      curl_close(<span style=color:#8be9fd;font-style:italic>$ch</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span><span style=color:#ff79c6>?&gt;</span>
</code></pre></div><p>å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸ºÂ <code>ga.php</code>ï¼Œæ”¾åœ¨ç½‘ç«™æ ¹ç›®å½•ã€‚</p>
<blockquote>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥å‘½åä¸ºå…¶å®ƒçš„ï¼Œä¸è¿‡ä½ éœ€è¦ä¿®æ”¹ä¸‹è¿°æåˆ°çš„ scriptã€‚</p>
</blockquote>
<p>åœ¨é¡µé¢ä¸­æ’å…¥ä¸‹è¿°ä»£ç ï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>&lt;<span style=color:#ff79c6>script</span>&gt;<span style=color:#ff79c6>!</span><span style=color:#8be9fd;font-style:italic>function</span>(e,n,o){<span style=color:#8be9fd;font-style:italic>var</span> t<span style=color:#ff79c6>=</span>e.screen,a<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>encodeURIComponent</span>,r<span style=color:#ff79c6>=</span>[<span style=color:#f1fa8c>&#34;dt=&#34;</span><span style=color:#ff79c6>+</span>a(n.title),<span style=color:#f1fa8c>&#34;dr=&#34;</span><span style=color:#ff79c6>+</span>a(n.referrer),<span style=color:#f1fa8c>&#34;ul=&#34;</span><span style=color:#ff79c6>+</span>(o.language<span style=color:#ff79c6>||</span>o.browserLanguage),<span style=color:#f1fa8c>&#34;sd=&#34;</span><span style=color:#ff79c6>+</span>t.colorDepth<span style=color:#ff79c6>+</span><span style=color:#f1fa8c>&#34;-bit&#34;</span>,<span style=color:#f1fa8c>&#34;sr=&#34;</span><span style=color:#ff79c6>+</span>t.width<span style=color:#ff79c6>+</span><span style=color:#f1fa8c>&#34;x&#34;</span><span style=color:#ff79c6>+</span>t.height,<span style=color:#f1fa8c>&#34;vp=&#34;</span><span style=color:#ff79c6>+</span>e.innerWidth<span style=color:#ff79c6>+</span><span style=color:#f1fa8c>&#34;x&#34;</span><span style=color:#ff79c6>+</span>e.innerHeight,<span style=color:#f1fa8c>&#34;z=&#34;</span><span style=color:#ff79c6>+</span> <span style=color:#ff79c6>+</span><span style=color:#ff79c6>new</span> <span style=color:#8be9fd;font-style:italic>Date</span>],i<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;?&#34;</span><span style=color:#ff79c6>+</span>r.join(<span style=color:#f1fa8c>&#34;&amp;&#34;</span>);e.<span style=color:#bd93f9>__</span>beacon_img<span style=color:#ff79c6>=</span><span style=color:#ff79c6>new</span> Image,e.<span style=color:#bd93f9>__</span>beacon_img.src<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/ga.php&#34;</span><span style=color:#ff79c6>+</span>i}(<span style=color:#8be9fd;font-style:italic>window</span>,<span style=color:#8be9fd;font-style:italic>document</span>,navigator,location);&lt;/<span style=color:#ff79c6>script</span>&gt;
</code></pre></div><p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯ç›´æ¥ä¿®æ”¹è‡ª imququ.com çš„Â <code>ana_js</code><br>
å±ˆå“¥åœ¨ Disqus æŠŠä»–è¿™éƒ¨åˆ† javascript çš„æºç ç»™äº†æˆ‘ï¼Œå¦‚ä¸‹ï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span> (<span style=color:#8be9fd;font-style:italic>function</span>(<span style=color:#8be9fd;font-style:italic>window</span>, <span style=color:#8be9fd;font-style:italic>document</span>, navigator, location) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#8be9fd;font-style:italic>var</span> screen <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>window</span>.screen;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#8be9fd;font-style:italic>var</span> encode <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>encodeURIComponent</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#8be9fd;font-style:italic>var</span> data <span style=color:#ff79c6>=</span> [<span style=color:#f1fa8c>&#39;dt=&#39;</span> <span style=color:#ff79c6>+</span> encode(<span style=color:#8be9fd;font-style:italic>document</span>.title),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#f1fa8c>&#39;dr=&#39;</span> <span style=color:#ff79c6>+</span> encode(<span style=color:#8be9fd;font-style:italic>document</span>.referrer),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#f1fa8c>&#39;ul=&#39;</span> <span style=color:#ff79c6>+</span> (navigator.language <span style=color:#ff79c6>||</span> navigator.browserLanguage),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#f1fa8c>&#39;sd=&#39;</span> <span style=color:#ff79c6>+</span> screen.colorDepth <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;-bit&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span style=color:#f1fa8c>&#39;sr=&#39;</span> <span style=color:#ff79c6>+</span> screen.width <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;x&#39;</span> <span style=color:#ff79c6>+</span> screen.height,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#f1fa8c>&#39;_=&#39;</span> <span style=color:#ff79c6>+</span> (<span style=color:#ff79c6>+</span><span style=color:#ff79c6>new</span> <span style=color:#8be9fd;font-style:italic>Date</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>];
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#8be9fd;font-style:italic>var</span> query <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;?&#39;</span> <span style=color:#ff79c6>+</span> data.join(<span style=color:#f1fa8c>&#39;&amp;&#39;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#8be9fd;font-style:italic>window</span>.<span style=color:#bd93f9>__</span>beacon_img <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Image();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span style=color:#8be9fd;font-style:italic>window</span>.<span style=color:#bd93f9>__</span>beacon_img.src <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;/ga.php&#39;</span> <span style=color:#ff79c6>+</span> query;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>})(<span style=color:#8be9fd;font-style:italic>window</span>, <span style=color:#8be9fd;font-style:italic>document</span>, navigator, location);
</code></pre></div><p>è¿™æ®µ JS ä»£ç å®Œæˆäº† URI ç”Ÿæˆå’Œå‘èµ·è¯·æ±‚ä¸¤ä¸ªæ“ä½œã€‚</p>
<p>åç«¯ PHP ç¨‹åºåŒ…å«äº† uuid ç”Ÿæˆã€cookie æ ¡éªŒå’Œè½¬å‘è¯·æ±‚ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<p>é¦–å…ˆæ˜¯ç”¨ md5 ç”Ÿæˆç¬¦åˆ Google Analytics çš„å”¯ä¸€ç”¨æˆ· uidï¼Œä½œä¸ºè¾¨åˆ«ä¸åŒç”¨æˆ·çš„ä¾æ®ã€‚<br>
ç„¶åä¼šä»å®¢æˆ·ç«¯çš„ cookie æ¥è¿›è¡ŒåŒ¹é…ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯å›è®¿çš„è®¿å®¢ã€‚å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰ç›¸å…³ cookieï¼Œè¿™ä¸ªè¯·æ±‚å°±ä¼šæŠŠ uuid å†™è¿›ç”¨æˆ·ç«¯çš„ cookie ä¸­ã€‚<br>
ç„¶åå°±æ˜¯è§£æ URIï¼Œé€šè¿‡è¯·æ±‚é‡‡é›†è¯·æ±‚çš„ URI è·å–æœ‰å…³ä¿¡æ¯ï¼Œç„¶åç»„æˆÂ <code>www.google-analytics.com/collect</code>Â é€‚ç”¨çš„ URIã€‚<br>
æœ€åå°±æ˜¯æœåŠ¡ç«¯é€šè¿‡å‘èµ· cURL è¯·æ±‚Â <code>www.google-analytics.com</code>ï¼ŒæŠŠç»Ÿè®¡çš„é¡µé¢è¡Œä¸ºæäº¤ç»™ Google å³å¯ã€‚</p>
<blockquote>
<p>ä¸Šè¿°ä»£ç ä½ å¯ä»¥åœ¨Â <a href=https://gist.github.com/neoFelhz/4bc074783641b1ba9f4484cd232765e7>æˆ‘çš„ gist</a>Â ä¸­ä¸‹è½½ã€‚</p>
</blockquote>
<h1 id=å¼‚æ­¥æ–¹æ¡ˆçš„æ€§èƒ½åˆ†æ>å¼‚æ­¥æ–¹æ¡ˆçš„æ€§èƒ½åˆ†æ</h1>
<p>
<figure class=gallery-image style=flex-grow:651;flex-basis:1563px>
<img data-src=https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373394.png width=847 height=130 data-srcset="https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373394_hu3e8c8d1985534be9f79f09ebd159ede9_6926_640x0_resize_catmullrom_3.png 640w, https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/2017/07/13/916.html/1630060151373394_hu3e8c8d1985534be9f79f09ebd159ede9_6926_1080x0_resize_catmullrom_3.png 1080w" data-zoomable data-lazyload alt="ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦">
<figcaption>ä¼˜åŒ– Google Analytics å¼‚æ­¥åŠ è½½æ¥æé«˜ä½ çš„ç½‘ç«™é€Ÿåº¦</figcaption>
</figure></p>
<p>ä¸Šå›¾ä¸ŠåŠéƒ¨åˆ†æ˜¯ä½¿ç”¨ Google Analytics çš„ Tracker Code çš„å‰ç«¯å“åº”é€Ÿåº¦ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯æˆ‘ä½¿ç”¨ PHP ç¨‹åºå¼‚æ­¥çš„ Google Analytics ç»Ÿè®¡çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<blockquote>
<p>ä½¿ç”¨Â <code>https://blog.viosey.com</code>Â å’ŒÂ <code>https://blog.nfz.moe</code>Â åšçš„æµ‹è¯•ã€‚</p>
</blockquote>
<p>ä½¿ç”¨ Google Analytics çš„ Tracker Code éœ€è¦åŠ è½½ä¸€ä¸ªå¤§å° 30k å·¦å³çš„è„šæœ¬ï¼ˆå¯è¢«ç¼“å­˜ï¼‰ï¼Œæ•´ä¸ªç»Ÿè®¡éœ€è¦èŠ±è´¹ 90ms å·¦å³ï¼ˆè¿˜ä¸åŒ…æ‹¬ä¸­é—´å¼‚æ­¥ç­‰å¾…æ—¶çš„æ—¶é—´ï¼‰ã€‚ä½¿ç”¨æˆ‘çš„å¼‚æ­¥ç»Ÿè®¡æ–¹æ¡ˆå¤§æ¦‚éœ€è¦ 85ms â€“ 100msã€‚è™½ç„¶é€Ÿåº¦ç›¸å·®æ— å‡ ï¼Œä½†æ˜¯å¼‚æ­¥æ–¹æ¡ˆæ— éœ€åŠ è½½ JSï¼Œè€Œä¸”å¦‚æœä¸»æœºæ€§èƒ½èƒ½å†å¥½ä¸€äº›ï¼Œåç«¯ PHP è¿è¡Œé€Ÿåº¦å†å¿«ä¸€äº›ï¼Œå®Œå…¨å¯ä»¥å°†æ—¶é—´æ§åˆ¶åœ¨ 50ms ä»¥å†…ã€‚</p>
<hr>
<p>è½¬è½½è‡ªï¼šÂ <a href=https://blog.nfz.moe/archives/google-analytics-optimize.html>neoFelhzâ€™s Blogâ€”Google Analytics å¼‚æ­¥ä¼˜åŒ–æ–¹æ¡ˆ</a></p>
</section>
<div class="border-b border-gray-300"></div>
<div class="flex justify-between md:text-2xl p-4 text-xl">
<a href=/2017/07/10/903.html/ title=" Respbianå®‰è£…NodeJså¹¶æ­å»ºGhost " class="cursor-pointer flex hover:text-theme items-center text-gray-500 ts-3-ease invisible" style=visibility:visible>
<span class="flex items-center text-4xl">
<i class="eva eva-arrow-left-outline"></i>
</span>
<span>ä¸Šä¸€ç¯‡</span>
</a>
<div class="hidden items-center text-sm xl:flex">
é™¤ç‰¹æ®Šå£°æ˜å¤–ï¼Œæœ¬åšå®¢ä¸€å¾‹ä½¿ç”¨ ã€Œ
<a href=https://creativecommons.org/licenses/by-nc-nd/4.0 target=_blank rel="noopener noreferrer" class=text-theme>ç½²å - éå•†ä¸šæ€§ä½¿ç”¨ - ç¦æ­¢æ¼”ç» 4.0</a>
ã€è®¸å¯åè®®è¿›è¡Œæˆæƒ
</div>
<div class="flex items-center text-sm xl:hidden">
<a href=https://creativecommons.org/licenses/by-nc-nd/4.0 target=_blank rel="noopener noreferrer" class=text-theme>
<img src=/images/Cc-by-nc-nd.svg alt="ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…" title="ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…" class=w-24>
</a>
</div>
<a href=/2017/12/11/993.html/ title=" åšå®¢ä¸€å‘¨å¹´è¾¾æˆ~ " class="cursor-pointer flex hover:text-theme items-center text-gray-500 ts-3-ease invisible" style=visibility:visible>
<span>ä¸‹ä¸€ç¯‡</span>
<span class="text-4xl flex items-center">
<i class="eva eva-arrow-right-outline text-4xl"></i>
</span>
</a>
</div></div>
</div>
</div>
</main>
<footer>
<div class="com-footer line-height-1 py-4 px-6 text-sm flex flex-col md:flex-row md:justify-between items-center border-t text-gray-600">
<div class="text-center mb-2 md:mb-0 flex">
<span>Copyright Â© 2016 - 2077 Ice-Hazymoon |</span>
<a href=/index.xml target=_blank class="hover:text-theme ml-2">RSS</a>
<a href=/sitemap.xml target=_blank class="hover:text-theme ml-2">Sitemap</a>
</div>
<div id=run-time>æœ¬åšå®¢å·²ä½è°ƒå­˜æ´»ï¼š<b>0</b> å¤© <b>0</b> å°æ—¶ <b>0</b> åˆ† <b>0</b> ç§’</div>
</div>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-98634098-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script async src="https://cdn.jsdelivr.net/gh/Ice-Hazymoon/blog-hugo-pages@latest/app.js?v=1631087922"></script>
</footer></div>
</div>
<div onclick=window.backTop() class="back-top cursor-pointer">
<div class=lt>
<span>
<i class="eva eva-arrow-upward-outline"></i>
</span>
</div>
</div>
</body>
</html>